/**
 * @preserve Galleria Twelve Theme 2011-02-14
 * http://galleria.aino.se
 *
 * Copyright (c) 2011, Aino
 * Licensed under the MIT license.
 */
!function(t){Galleria.addTheme({name:"twelve",author:"Galleria",css:"galleria.twelve.css",defaults:{transition:"pulse",transitionSpeed:500,imageCrop:!0,thumbCrop:!0,carousel:!1,_locale:{show_thumbnails:"Show thumbnails",hide_thumbnails:"Hide thumbnails",play:"Play slideshow",pause:"Pause slideshow",enter_fullscreen:"Enter fullscreen",exit_fullscreen:"Exit fullscreen",popout_image:"Popout image",showing_image:"Showing image %s of %s"},_showFullscreen:!0,_showPopout:!0,_showProgress:!0,_showTooltip:!0},init:function(e){this.addElement("bar","fullscreen","play","popout","thumblink","s1","s2","s3","s4","progress"),this.append({stage:"progress",container:["bar","tooltip"],bar:["fullscreen","play","popout","thumblink","info","s1","s2","s3","s4"]}),this.prependChild("info","counter");var i=this,s=this.$("thumbnails-container"),n=this.$("thumblink"),o=this.$("fullscreen"),l=this.$("play"),a=this.$("popout"),r=this.$("bar"),h=this.$("progress"),u=e.transition,c=e._locale,p=!1,d=!1,g=!!e.autoplay,f=!1,m=function(){s.height(i.getStageHeight()).width(i.getStageWidth()).css("top",p?0:i.getStageHeight()+30)};m(),e._showTooltip&&i.bindTooltip({thumblink:c.show_thumbnails,fullscreen:c.enter_fullscreen,play:c.play,popout:c.popout_image,caption:function(){var t=i.getData(),e="";return t&&(t.title&&t.title.length&&(e+="<strong>"+t.title+"</strong>"),t.description&&t.description.length&&(e+="<br>"+t.description)),e},counter:function(){return c.showing_image.replace(/\%s/,i.getIndex()+1).replace(/\%s/,i.getDataLength())}}),this.bind("play",function(){g=!0,l.addClass("playing")}),this.bind("pause",function(){g=!1,l.removeClass("playing"),h.width(0)}),e._showProgress&&this.bind("progress",function(t){h.width(t.percent/100*this.getStageWidth())}),this.bind("loadstart",function(t){t.cached||this.$("loader").show()}),this.bind("loadfinish",function(){h.width(0),this.$("loader").hide(),this.refreshTooltip("counter","caption")}),this.bind("thumbnail",function(e){t(e.thumbTarget).hover(function(){i.setInfo(e.thumbOrder),i.setCounter(e.thumbOrder)},function(){i.setInfo(),i.setCounter()}).click(function(){n.click()})}),this.bind("fullscreen_enter",function(){d=!0,i.setOptions("transition","none"),o.addClass("open"),r.css("bottom",0),this.defineTooltip("fullscreen",c.exit_fullscreen),this.addIdleState(r,{bottom:-31})}),this.bind("fullscreen_exit",function(){d=!1,Galleria.utils.clearTimer("bar"),i.setOptions("transition",u),o.removeClass("open"),r.css("bottom",0),this.defineTooltip("fullscreen",c.enter_fullscreen),this.removeIdleState(r,{bottom:-31})}),this.bind("rescale",m),this.addIdleState(this.get("image-nav-left"),{left:-36}),this.addIdleState(this.get("image-nav-right"),{right:-36}),n.click(function(){p&&f?i.play():(f=g,i.pause()),s.animate({top:p?i.getStageHeight()+30:0},{easing:"galleria",duration:400,complete:function(){i.defineTooltip("thumblink",p?c.show_thumbnails:c.hide_thumbnails),n[p?"removeClass":"addClass"]("open"),p=!p}})}),e._showPopout?a.click(function(t){i.openLightbox(),t.preventDefault()}):(a.remove(),e._showFullscreen&&(this.$("s4").remove(),this.$("info").css("right",40),o.css("right",0))),l.click(function(){i.defineTooltip("play",g?c.play:c.pause),g?i.pause():(p&&n.click(),i.play())}),e._showFullscreen?o.click(function(){d?i.exitFullscreen():i.enterFullscreen()}):(o.remove(),e._show_popout&&(this.$("s4").remove(),this.$("info").css("right",40),a.css("right",0))),e._showFullscreen||e._showPopout||(this.$("s3,s4").remove(),this.$("info").css("right",10))}})}(jQuery);